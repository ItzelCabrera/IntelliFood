<!DOCTYPE html>
<html>
    <head>
        <title>Registro</title>
        <meta http-equiv="Content-Type" content = "text/html; charset=utf-8"/>
        <meta name = "viewport" content="width=device-width,initial-scale=1.0">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel = 'stylesheet' href = '../styles.css'>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&family=Fjalla+One&family=Secular+One&family=Shadows+Into+Light&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
        <script>
            
            $(document).ready(function(){
                // Activamos los popovers
                 $('[data-bs-toggle="popover"]').popover();  
            });

            function show() {
                const msg = document.getElementById('MessageBox');
                const btn = document.getElementById('Registrarse');
                if (msg.style.display === 'none') {
                        msg.style.display = 'block';
                        document.getElementById ('progreso').style.width = '100%'
                        reproducir();
                } else {
                        msg.style.display = 'none';
                }
            }

        </script>
        
    </head>
    <body>
        <% var i = 0; %>
        <header>
            <nav class="navbar navbar-expand-lg navbar-custom">
                <img class = "logo" src="./food-pantry.png">
            </nav>
        </header>
        <main class="container main-container">
            <form action="/register" role="form" method="post">
                <div class="form-group mx-sm-3">
                    <label for="inputUser" class="sr-only txt" data-toggle="popover" data-trigger="hover" title="Verifica longitud entre 10-25" data-placement="right">Usuario</label>
                    <input type="text" class="form-control" id="inputUser" name="UserName" placeholder="" size="9" maxlength="25" onclick="document.getElementById ('progreso').style.width = '30%'">
                </div>
                <div class="form-group mx-sm-3">
                    <label for="inputMail" class="sr-only txt data-toggle="popover" data-trigger="hover" title="Verifica longitud entre 10-25"">Correo</label>
                    <input type="email" class="form-control" id="inputMail" name="UserEmail" placeholder="example@gmail.com" size="9" maxlength="25" onclick="document.getElementById ('progreso').style.width = '60%'">
                </div>
                <div class="form-group mx-sm-3">
                    <label for="inputPass" class="sr-only txt" data-toggle="popover" data-trigger="hover" title="Verifica longitud entre 10-25">Contraseña</label>
                    <input type="password" class="form-control" id="inputPass" name="UserPassword" placeholder="" size="9" maxlength="25" onclick="document.getElementById ('progreso').style.width = '90%'">
                </div>
                <br> 
                <button type="submit" class="btn btn-info" name="register" id="Registrarse" onclick="show()">Registrarse</button>

                <br>
                <div class="progress" id="file">
                    <div id="progreso" class="progress-bar bg-info" role="progressbar" style="width: 1%" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </form>
            <audio id="btn-audio" src="../success.mp3"> </audio>  
            <script>
                let sound = true;
                let MiAudio = document.getElementById("btn-audio");

                function reproducir(){
                    if(sound){
                        MiAudio.play();
                    }
                }
            </script>
            <br>
            <div class="alert alert-success" role="alert" id="MessageBox" style="display:none;">
                <h4 class="alert-heading">Registro exitoso!</h4>
                <p>Fuiste registrad@ con éxito!</p>
                <a href="/"><button type="submit" class="btn btn-success">Iniciar Sesión</button></a> 
            </div>
        </main>
    </body>
</html>